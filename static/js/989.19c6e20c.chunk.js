"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[989],{989:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var r,a=t(4270),i=t(4814),o=t(9187),c=t(5861),s=t(9439),l=t(1413),u=t(4687),d=t.n(u),h=t(2791),p=t(5705),x=t(6727),f=t(4554),m=t(4190),v=t(4281),Z=t(168),j=t(6088),g=t(3329),b=(0,j.Z)(p.l0)((function(){return{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",margin:"0 auto"}})),w=function(e){var n=e.children;return(0,g.jsx)("div",{style:{display:"grid",width:"100%",gridTemplateColumns:"1fr 1fr",justifyContent:"center",marginBottom:"16px",gap:"8px"},children:n})},C=j.Z.h3(r||(r=(0,Z.Z)(["\n  color: red;\n  margin-top: 8px;\n  margin-bottom: 16px;\n"]))),y=(0,x.Ry)({name:(0,x.Z_)().matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan").required(),phone:(0,x.Z_)().matches(/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/,"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +").required()}),k=function(e){var n=e.name,t=e.label,r=e.placeholder;return(0,g.jsx)(p.gN,{name:n,children:function(e){var n=e.field,a=e.meta;return(0,g.jsx)(f.Z,{children:(0,g.jsx)(m.Z,(0,l.Z)((0,l.Z)({},n),{},{label:t,fullWidth:!0,placeholder:r,error:a.touched&&a.error,helperText:a.touched&&a.error?a.error:""}))})}})};function F(){var e=(0,o.Jx)().data,n=void 0===e?[]:e,t=(0,o.Tn)(),r=(0,s.Z)(t,1)[0],a=(0,h.useState)(""),i=(0,s.Z)(a,2),l=i[0],u=i[1],x=function(){var e=(0,c.Z)(d().mark((function e(t,a){var i,o,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.resetForm,o=t.name,c=t.phone,!n.some((function(e){return e.name.toLowerCase().includes(o.toLowerCase())}))){e.next=5;break}return u("".concat(o," is already in contacts. You can edit data in table below...")),e.abrupt("return");case 5:return e.prev=5,u(""),e.next=9,r({name:o,phone:c}).unwrap();case 9:i(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Failed to save the post: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,g.jsx)(p.J9,{initialValues:{name:"",phone:""},validationSchema:y,onSubmit:x,children:(0,g.jsxs)(b,{children:[(0,g.jsxs)(w,{children:[(0,g.jsx)(k,{name:"name",label:"Name",placeholder:"Enter the name"}),(0,g.jsx)(k,{name:"phone",label:"Phone number",placeholder:"Enter the phone"})]}),l&&(0,g.jsx)(C,{children:l}),(0,g.jsx)(v.Z,{variant:"contained",type:"submit",children:"Add Contact"})]})})}var _,A,S,z=t(5048),J=function(e){return e.filter},L=function(){return{filter:(0,z.v9)(J)}},q=t(890),E=(0,j.Z)(f.Z)(_||(_=(0,Z.Z)(["\n  gap: 8px;\n  display: flex;\n  align-items: center;\n"]))),N=(0,j.Z)(v.Z)(A||(A=(0,Z.Z)(["\n  margin-left: auto;\n  min-width: 7rem;\n"])));function T(e){var n=e.id,t=e.phone,r=e.name,a=(0,z.I0)(),i=(0,h.useState)(!1),l=(0,s.Z)(i,2),u=l[0],p=l[1],x=(0,h.useState)(r),f=(0,s.Z)(x,2),Z=f[0],j=f[1],b=(0,h.useState)(t),w=(0,s.Z)(b,2),C=w[0],y=w[1],k=(0,o.Nt)(),F=(0,s.Z)(k,1)[0],_=(0,o.wv)(),A=(0,s.Z)(_,1)[0],S=function(){var e=(0,c.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:n,name:Z,phone:C},e.prev=1,e.next=4,A(t).unwrap();case 4:p(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Failed to save the post: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return(0,g.jsx)("li",{children:u?(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(E,{children:[(0,g.jsx)(m.Z,{type:"text",focused:!0,value:Z,variant:"standard",onChange:function(e){return j(e.target.value)}}),(0,g.jsx)(m.Z,{type:"text",focused:!0,value:C,variant:"standard",onChange:function(e){return y(e.target.value)}}),(0,g.jsx)(N,{onClick:S,variant:"contained",color:"success",children:"Update"}),(0,g.jsx)(v.Z,{sx:{minWidth:"7rem"},onClick:function(){return p(!1)},variant:"contained",color:"error",children:"Cancel"})]})}):(0,g.jsxs)(E,{children:[(0,g.jsx)(q.Z,{sx:{fontWeight:"bold"},children:"".concat(r,": ")}),(0,g.jsx)(q.Z,{children:t}),(0,g.jsx)(N,{onClick:function(){return p(!0)},variant:"contained",children:"Edit"}),(0,g.jsx)(v.Z,{sx:{minWidth:"7rem"},onClick:function(){a(F(n))},variant:"contained",children:"Delete"})]})})}var W=j.Z.ul(S||(S=(0,Z.Z)(["\n  display: flex;\n  flex-direction: column;\n  list-style: none;\n  padding-left: 0;\n  gap: 12px;\n"]))),$=function(){var e=(0,o.Jx)().data,n=void 0===e?[]:e,t=L().filter,r=h.useMemo((function(){return n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}),[n,t]);return(0,g.jsx)(W,{children:r.map((function(e){var n=e._id,t=e.phone,r=e.name;return(0,g.jsx)(T,{id:n,phone:t,name:r},n)}))})},I=t(1634);function P(){var e=L().filter,n=(0,z.I0)();return(0,g.jsx)(m.Z,{type:"text",label:"Find contacts by name",name:"filter",placeholder:"Enter your search",value:e,onChange:function(e){n((0,I.T)(e.target.value))}})}function B(){var e=(0,o.Jx)().isLoading;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.q,{children:(0,g.jsx)("title",{children:"Your contacts"})}),(0,g.jsx)("div",{children:e&&"Request in progress..."}),(0,g.jsx)(i.$,{title:"Phonebook",children:(0,g.jsx)(F,{})}),(0,g.jsxs)(i.$,{title:"Contacts",children:[(0,g.jsx)(P,{}),(0,g.jsx)($,{})]})]})}},4814:function(e,n,t){t.d(n,{$:function(){return s}});t(2791);var r,a=t(4554),i=t(168),o=t(6088).Z.legend(r||(r=(0,i.Z)(["\n  font-size: 1.3rem;\n  font-weight: bold;\n"]))),c=t(3329),s=function(e){var n=e.title,t=e.children;return(0,c.jsxs)(a.Z,{sx:{padding:3},component:"fieldset",children:[(0,c.jsx)(o,{children:n}),t]})}}}]);
//# sourceMappingURL=989.19c6e20c.chunk.js.map